<!-- ============================================= -->
<!-- AGENTS TAB - COMPLETE HTML SECTION -->
<!-- Add this entire section to your existing HTML -->
<!-- ============================================= -->

<!-- 1. Add this button to your existing .settings-tabs div -->
<button class="tab-button" onclick="switchSettingsTab('agents')">Agents</button>

<!-- 2. Add this complete tab content after your other tab contents (like tools-tab, mcp-servers-tab, etc.) -->
<div id="agents-tab" class="tab-content">
    <div style="background: #1a1a1a; padding: 20px; border-radius: 8px;">
        <h3 style="margin-top: 0; color: #3b82f6;">AI Agent Configuration</h3>
        
        <p style="color: #999; margin-bottom: 20px;">
            Configure AI providers and select models for your multi-agent system. Each model shows context window size, pricing, and specializations for software engineering tasks.
        </p>

        <!-- Provider Sections -->
        <div id="providersList" style="max-height: 640px; overflow-y: auto;">
            
            <!-- OpenAI Provider -->
            <div class="provider-section" style="background: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h4 style="margin: 0; color: #e0e0e0;">OpenAI</h4>
                        <p style="margin: 5px 0; color: #999; font-size: 14px;">GPT-5 unified system with up to 2M token context windows</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="provider-openai" onchange="toggleProvider('openai', this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div id="openai-config" style="display: none;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #ccc; font-size: 14px;">API Key</label>
                        <input type="password" id="openai-api-key" placeholder="sk-..." 
                               style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; 
                                      border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="color: #ccc; font-size: 14px;">Select Models:</label>
                    </div>
                    
                    <div class="models-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 15px;">
                        
                        <!-- GPT-5 -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #ef4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: bold;">NEW</div>
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">GPT-5</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Unified Intelligence</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Agentic Coding</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Architecture</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">OpenAI's flagship unified model. 74.9% on SWE-bench, 94.6% on AIME 2025. 45% fewer errors than GPT-4o.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: Dynamic (auto-routing)</div>
                                        <div>Price: TBD (API launching)</div>
                                        <div style="color: #22c55e;">✓ Unified System | ✓ Extended Thinking</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-openai-gpt5" value="gpt-5" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- GPT-5 Pro -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #ef4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: bold;">NEW</div>
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">GPT-5 Pro</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Extended Reasoning</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Complex Analysis</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">88.4% on GPQA. 50-80% fewer tokens than o3 for same performance.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: Extended reasoning</div>
                                        <div>Price: Premium tier</div>
                                        <div style="color: #3b82f6;">⚡ Replaces o3-pro</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-openai-gpt5pro" value="gpt-5-pro" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- GPT-5 Mini -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px; position: relative;">
                            <div style="position: absolute; top: 10px; right: 10px; background: #ef4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: bold;">NEW</div>
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">GPT-5 Mini</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Cost-Effective</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">High Volume</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Efficient variant for high-volume applications. Auto-fallback when limits reached.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: Optimized for speed</div>
                                        <div>Price: Lower tier</div>
                                        <div style="color: #22c55e;">✓ Fast Response</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-openai-gpt5mini" value="gpt-5-mini" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- o3 -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">o3 (Legacy)</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Security Analysis</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Complex Reasoning</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Advanced multi-step problem solving. Being replaced by GPT-5 Pro.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 200,000 tokens</div>
                                        <div>Price: $60.00/$240.00 per 1M</div>
                                        <div style="color: #f59e0b;">⚠ Deprecating soon</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-openai-o3" value="o3" style="margin-left: 10px;">
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <!-- Anthropic Provider -->
            <div class="provider-section" style="background: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h4 style="margin: 0; color: #e0e0e0;">Anthropic</h4>
                        <p style="margin: 5px 0; color: #999; font-size: 14px;">Claude 4 series - Best real-world coding performance with native MCP support</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="provider-anthropic" onchange="toggleProvider('anthropic', this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div id="anthropic-config" style="display: none;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #ccc; font-size: 14px;">API Key</label>
                        <input type="password" id="anthropic-api-key" placeholder="sk-ant-..." 
                               style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; 
                                      border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="color: #ccc; font-size: 14px;">Select Models:</label>
                    </div>
                    
                    <div class="models-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 15px;">
                        
                        <!-- Claude 4 Opus -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Claude 4 Opus</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Complex Reasoning</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Architecture</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Debugging</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">72.5% on SWE-bench. Industry-leading for multi-hour agent workflows.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 200,000 tokens</div>
                                        <div>Price: $15.00/$75.00 per 1M</div>
                                        <div style="color: #22c55e;">✓ Native MCP | ✓ Tool Use</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-anthropic-opus4" value="claude-4-opus" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- Claude 4 Sonnet -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Claude 4 Sonnet</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Code Generation</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Testing</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Documentation</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">72.7% on SWE-bench. Optimal balance with 64K output tokens.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 200,000 tokens</div>
                                        <div>Price: $3.00/$15.00 per 1M</div>
                                        <div style="color: #22c55e;">✓ Native MCP | ✓ 64K Output</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-anthropic-sonnet4" value="claude-4-sonnet" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- Claude 3.5 Haiku -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Claude 3.5 Haiku</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Rapid Prototyping</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Quick Tasks</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Blazing-fast. 40.6% on SWE-bench despite being smallest.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 200,000 tokens</div>
                                        <div>Price: $0.80/$4.00 per 1M</div>
                                        <div style="color: #22c55e;">✓ Native MCP | ✓ Fastest</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-anthropic-haiku35" value="claude-3.5-haiku" style="margin-left: 10px;">
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <!-- Google Gemini Provider -->
            <div class="provider-section" style="background: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h4 style="margin: 0; color: #e0e0e0;">Google Gemini</h4>
                        <p style="margin: 5px 0; color: #999; font-size: 14px;">Largest context windows (2M tokens) with native Python execution</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="provider-gemini" onchange="toggleProvider('gemini', this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div id="gemini-config" style="display: none;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #ccc; font-size: 14px;">API Key</label>
                        <input type="password" id="gemini-api-key" placeholder="AI..." 
                               style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; 
                                      border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="color: #ccc; font-size: 14px;">Select Models:</label>
                    </div>
                    
                    <div class="models-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 15px;">
                        
                        <!-- Gemini 2.0 Pro Experimental -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Gemini 2.0 Pro Experimental</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Large Context</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Multimodal</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Largest context at 2M tokens. Experimental features.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 2,000,000 tokens</div>
                                        <div>Price: Variable</div>
                                        <div style="color: #f59e0b;">⚠ MCP: Coming Apr 2025</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-gemini-20pro" value="gemini-2.0-pro-experimental" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- Gemini 2.5 Pro -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Gemini 2.5 Pro</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Python Execution</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Architecture</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Native Python execution in 30-second sandbox.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 1,000,000 tokens</div>
                                        <div>Price: $1.25-$2.50/$10-$15 per 1M</div>
                                        <div style="color: #22c55e;">✓ Python Sandbox | ✓ JSON Schema</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-gemini-25pro" value="gemini-2.5-pro" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- Gemini 2.5 Flash -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Gemini 2.5 Flash</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Cost-Effective</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Rapid Tasks</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Best price-performance ratio. 22% efficiency gain.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 1,000,000 tokens</div>
                                        <div>Price: $0.30/$2.50 per 1M</div>
                                        <div style="color: #22c55e;">✓ JSON Schema</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-gemini-25flash" value="gemini-2.5-flash" style="margin-left: 10px;">
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <!-- Mistral AI Provider -->
            <div class="provider-section" style="background: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h4 style="margin: 0; color: #e0e0e0;">Mistral AI</h4>
                        <p style="margin: 5px 0; color: #999; font-size: 14px;">Specialized code generation across 80+ languages</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="provider-mistral" onchange="toggleProvider('mistral', this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div id="mistral-config" style="display: none;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #ccc; font-size: 14px;">API Key</label>
                        <input type="password" id="mistral-api-key" placeholder="API key..." 
                               style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; 
                                      border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="color: #ccc; font-size: 14px;">Select Models:</label>
                    </div>
                    
                    <div class="models-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 15px;">
                        
                        <!-- Codestral 2508 -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">Codestral 2508</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Code Generation</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">80+ Languages</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">22B params specialized for code. Free tier available.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 32,000 tokens</div>
                                        <div>Price: $0.20/$0.60 per 1M</div>
                                        <div style="color: #22c55e;">✓ Privacy-Focused</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-mistral-codestral" value="codestral-2508" style="margin-left: 10px;">
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <!-- DeepSeek Provider -->
            <div class="provider-section" style="background: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h4 style="margin: 0; color: #e0e0e0;">DeepSeek</h4>
                        <p style="margin: 5px 0; color: #999; font-size: 14px;">Exceptional value - comparable to o1 at 10x lower cost</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="provider-deepseek" onchange="toggleProvider('deepseek', this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div id="deepseek-config" style="display: none;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: #ccc; font-size: 14px;">API Key</label>
                        <input type="password" id="deepseek-api-key" placeholder="API key..." 
                               style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; 
                                      border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="color: #ccc; font-size: 14px;">Select Models:</label>
                    </div>
                    
                    <div class="models-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 15px;">
                        
                        <!-- DeepSeek-V3 Chat -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">DeepSeek-V3 Chat</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">General Coding</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Chat</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Great value. Off-peak discounts 16:30-00:30 UTC.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 64,000 tokens</div>
                                        <div>Price: $0.27/$1.10 per 1M</div>
                                        <div style="color: #22c55e;">✓ OpenAI Compatible</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-deepseek-v3" value="deepseek-v3-chat" style="margin-left: 10px;">
                            </div>
                        </div>

                        <!-- DeepSeek-R1 Reasoner -->
                        <div class="model-card" style="background: #1a1a1a; border: 1px solid #444; border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h5 style="margin: 0 0 8px 0; color: #3b82f6;">DeepSeek-R1 Reasoner</h5>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px;">
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Complex Reasoning</span>
                                        <span class="tag" style="background: #374151; color: #9ca3af; padding: 2px 8px; border-radius: 12px; font-size: 11px;">Algorithms</span>
                                    </div>
                                    <p style="margin: 0 0 8px 0; color: #999; font-size: 13px;">Performance comparable to o1 at 10x lower cost.</p>
                                    <div style="font-size: 12px; color: #888;">
                                        <div>Context: 64,000 tokens</div>
                                        <div>Price: $0.55/$2.19 per 1M</div>
                                        <div style="color: #22c55e;">✓ Value Leader</div>
                                    </div>
                                </div>
                                <input type="checkbox" id="model-deepseek-r1" value="deepseek-r1-reasoner" style="margin-left: 10px;">
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

        </div>

        <div style="margin-top: 20px; display: flex; gap: 10px;">
            <button id="saveAgentsSettingsBtn" class="save-btn" onclick="saveAgentsSettings()">Save Agent Configuration</button>
            <button class="btn-secondary" onclick="testSelectedModels()">Test Selected Models</button>
        </div>

        <div id="agentsSettingsMessage" style="margin-top: 15px; padding: 10px; border-radius: 4px; display: none;"></div>
    </div>
</div>

<!-- 3. Add these styles to your existing <style> section -->
<style>
.provider-section {
    transition: all 0.3s ease;
}

.model-card {
    transition: all 0.2s ease;
}

.model-card:hover {
    background: #222 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.tag {
    white-space: nowrap;
}

/* Highlight selected models */
.model-card:has(input:checked) {
    border-color: #3b82f6 !important;
    background: #1e293b !important;
}
</style>

<!-- 4. Add this JavaScript to your existing <script> section -->
<script>
// Agent Management Functions
function toggleProvider(providerId, enabled) {
    const configDiv = document.getElementById(`${providerId}-config`);
    if (configDiv) {
        configDiv.style.display = enabled ? 'block' : 'none';
    }
    
    // Track changes
    trackAgentsSettingsChanges();
}

function trackAgentsSettingsChanges() {
    const saveBtn = document.getElementById('saveAgentsSettingsBtn');
    if (saveBtn) {
        // Check if any provider is enabled and has an API key
        const hasChanges = checkAgentsChanges();
        if (hasChanges) {
            saveBtn.classList.add('has-changes');
        } else {
            saveBtn.classList.remove('has-changes');
        }
    }
}

function checkAgentsChanges() {
    // Check each provider for changes
    const providers = ['openai', 'anthropic', 'gemini', 'mistral', 'deepseek'];
    
    for (const provider of providers) {
        const checkbox = document.getElementById(`provider-${provider}`);
        const apiKeyInput = document.getElementById(`${provider}-api-key`);
        
        if (checkbox && checkbox.checked && apiKeyInput && apiKeyInput.value.trim()) {
            return true;
        }
    }
    
    return false;
}

async function saveAgentsSettings() {
    const providers = {};
    const providerIds = ['openai', 'anthropic', 'gemini', 'mistral', 'deepseek'];
    
    for (const providerId of providerIds) {
        const checkbox = document.getElementById(`provider-${providerId}`);
        if (checkbox && checkbox.checked) {
            const apiKey = document.getElementById(`${providerId}-api-key`).value.trim();
            const selectedModels = [];
            
            // Get all checked models for this provider
            const modelCheckboxes = document.querySelectorAll(`#${providerId}-config input[type="checkbox"]:checked`);
            modelCheckboxes.forEach(cb => {
                if (cb.value) {
                    selectedModels.push(cb.value);
                }
            });
            
            if (apiKey && selectedModels.length > 0) {
                providers[providerId] = {
                    enabled: true,
                    apiKey: apiKey,
                    models: selectedModels
                };
            }
        }
    }
    
    // Save to backend or localStorage
    try {
        const response = await fetchAPI('/api/agents/configuration', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ providers })
        });
        
        if (response.status === 'success') {
            showAgentMessage('Agent configuration saved successfully!', 'success');
            
            // Reset save button
            const saveBtn = document.getElementById('saveAgentsSettingsBtn');
            if (saveBtn) {
                saveBtn.classList.remove('has-changes');
            }
        } else {
            showAgentMessage('Failed to save configuration', 'error');
        }
    } catch (error) {
        // Fallback to localStorage
        localStorage.setItem('agentConfiguration', JSON.stringify(providers));
        showAgentMessage('Configuration saved locally', 'success');
    }
}

async function testSelectedModels() {
    const selectedModels = [];
    
    // Collect all selected models
    const modelCheckboxes = document.querySelectorAll('.model-card input[type="checkbox"]:checked');
    modelCheckboxes.forEach(cb => {
        selectedModels.push(cb.value);
    });
    
    if (selectedModels.length === 0) {
        showAgentMessage('Please select at least one model to test', 'warning');
        return;
    }
    
    showAgentMessage(`Testing ${selectedModels.length} selected models...`, 'info');
    
    // TODO: Implement actual model testing
    setTimeout(() => {
        showAgentMessage(`Successfully tested ${selectedModels.length} models`, 'success');
    }, 2000);
}

function showAgentMessage(message, type) {
    const messageEl = document.getElementById('agentsSettingsMessage');
    if (messageEl) {
        messageEl.textContent = message;
        messageEl.style.display = 'block';
        messageEl.style.background = type === 'error' ? '#dc2626' : 
                                   type === 'success' ? '#22c55e' : 
                                   type === 'warning' ? '#f59e0b' : '#3b82f6';
        
        setTimeout(() => {
            messageEl.style.display = 'none';
        }, 5000);
    }
}

// Add event listeners to track changes when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Add change listeners to all provider checkboxes and API key inputs
    const providers = ['openai', 'anthropic', 'gemini', 'mistral', 'deepseek'];
    
    providers.forEach(provider => {
        const checkbox = document.getElementById(`provider-${provider}`);
        const apiKeyInput = document.getElementById(`${provider}-api-key`);
        
        if (checkbox) {
            checkbox.addEventListener('change', trackAgentsSettingsChanges);
        }
        if (apiKeyInput) {
            apiKeyInput.addEventListener('input', trackAgentsSettingsChanges);
        }
    });
    
    // Add change listeners to all model checkboxes
    const modelCheckboxes = document.querySelectorAll('.model-card input[type="checkbox"]');
    modelCheckboxes.forEach(cb => {
        cb.addEventListener('change', trackAgentsSettingsChanges);
    });
});

// Update your existing switchSettingsTab function to include agents
// (Modify your existing function to add this case)
function switchSettingsTab(tabName) {
    // ... existing code ...
    
    // Add this case to your switch statement
    if (tabName === 'agents') {
        // Load saved agent configuration if exists
        loadAgentConfiguration();
    }
    
    // ... rest of existing code ...
}

async function loadAgentConfiguration() {
    try {
        // Try loading from backend
        const response = await fetchAPI('/api/agents/configuration');
        if (response.providers) {
            applyAgentConfiguration(response.providers);
        }
    } catch (error) {
        // Fallback to localStorage
        const saved = localStorage.getItem('agentConfiguration');
        if (saved) {
            applyAgentConfiguration(JSON.parse(saved));
        }
    }
}

function applyAgentConfiguration(providers) {
    for (const [providerId, config] of Object.entries(providers)) {
        const checkbox = document.getElementById(`provider-${providerId}`);
        if (checkbox) {
            checkbox.checked = config.enabled;
            toggleProvider(providerId, config.enabled);
            
            // Don't show API keys for security, just indicate they're saved
            const apiKeyInput = document.getElementById(`${providerId}-api-key`);
            if (apiKeyInput && config.apiKey) {
                apiKeyInput.placeholder = 'API key saved (enter new value to change)';
            }
            
            // Check the selected models
            if (config.models) {
                config.models.forEach(modelId => {
                    const modelCheckbox = document.querySelector(`#${providerId}-config input[value="${modelId}"]`);
                    if (modelCheckbox) {
                        modelCheckbox.checked = true;
                    }
                });
            }
        }
    }
}
</script>
